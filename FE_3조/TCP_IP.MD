# TCP/IP

## 역사

## 계층

## 흐름

## 특징

### TCP

> 1. 신뢰성있는 데이터 통신을 가능하게 해주는 프로토콜
> 2. 커넥션 연결(3-way-handsake),양방향통신, 해제는 4-way-handsake
> 3. (이게 제일 중요한 특징)데이터의 순차 전송을 보장
>
> - SEQ(sequence,순서),ACK(acknowledge)로 수신 데이터 순서(offset)을 확인하고 누락/지연 패킷에 대한 재전송 알고리즘을 제공해 IP를 보완하기 때문에 수신된데이터를 읽어 들일때는 정확히 송신 순서에 맞게 데이터 누락없이 처리.
> - SEQ: 송신자와 수신자 서로 상대방에게 자신이 보내는 데이터 순서 정보
>   - 이를 통해 수신측에서는 상대방이 지금까지 나에게 보낸 데이터의 총량 확인.
>   - SEQ는 데이터 순서를 맞추는데 사용
> - ACK: 자신이 정상적으로 받은 데이터 정보
>   - 다음 수신이 와야하는 SEQ번호, 상대방이 받은 데이터의 총량 확인가능, 누락발생시 재전송해야하는 SEQ번호를 알 수 있음.
>   - 재전송은 상대방이 보내오는 ACK의 번호와 일치하는 SEQ번호의 데이터를 전송
>
> 4. 흐름제어: 송수신자 간의 데어터 속도 차이로 인해 발생하는 흐름문제를 제어
>
> - 송신자는 보내기만하면되지만 수신자측에서 데이터를 받아 처리하는 속도가 더딜 수 있는데 이때 처리하는 데이터의 양이 너무 많아지면 컴퓨터도 우리의 뇌와 마찬가지로 기억하는 양이 제한되어있는데 이를 초과하면 데이터가 손실됨.
> - 제어 방법
>   - 송신자는 자신이 한번에 보낼수있는 데이터양을 , 수신자는 자신이 처리할 수 있는 데이터 양을 끊임없이 확인하여 TCP Header 의 window size를 사용하여 한번에 받고/보낼수 있는 데이터 양을 정함.
>
> 5. 혼잡제어: 네트워크 관련하여 송신자 쪽에서 데이터를 보내도 네트워크속도가 느려 수신자측에서 데이터가 안와 통신이 제대로 안되는 문제를 제어
>
> - 제어 방법
>   - Slow Start: 송신자는 연결 초기에 데이터 송출량(데이터를 보내는량)을 낮게 잡고 보내면서 수신자의 수신을확인하여 데이터 송출량을 조절.

### IP

> 1. 통신 상대를 정하기 위해 네트워크상에 존재하는 모든 기기에 고유의 주소같은 것이 할당.
> 2. 비연결형 서비스를 제공
>
> - 패킷의 전달 순서, 패킷 분실 여부 등에서 연결형 서비스보다 신뢰성이 떨어지는 전송 방식
> - 패킷이 서로 다른 경로를 통해 목적지 호스트로 전달되기 때문에 패킷이 도착하는 순서가 일정하지 않을 수 있음 -> 상위계층인 전송계층은 수신한 패킷 순서를 재조정하는 기능이 필요.
>   - TCP의 데이터의 순차 전송을 보장이 이를 해결.
>
> 3. 패킷을 분할, 병합하는 기능을 수행
>
> - 네트워크마다 프레임 크기가 다르기 떄문에 분할이 필요하고, 이를 다시 병합.
> - 통신방법이 다른 네트워끼리 통신을 가능하게함( 케이블의 차이, 통신형식의 차이)
>
> 4. Best Effort 원칙에 따른 전송 기능을 제공
>
> - ‘노력은 하지만 결과는 보장하지 않는다’라는 뜻
> - 헤더가 깨지지 않았는지확인하거나 수신처의 주소가 존재하는지에 대한 판단 및 처리를 진행
> - 재전송 처리는 하지않음
> - 신뢰성을 보장하지 않는다는 의미
> - 예시(우편배달)  
>   4-1. 편지에 주소를 적어 보내면 우체부 아저씨가 수거해서 우체국에 모아서 보낼 주소지의 우체국으로 보낸 후 다시 우체부 아저씨가 주소지의 우편함에 편지를 가져다 놓게된다.  
>   4-2. 이때 이편지는 실제 사람에게 직접전달해 주는것이 아니고 또한 편지 받은 사람이 잘받았다고 연락하는것이 아니기에 편지를 보내는 사람은 잘 도착했는지 알 방법이 없음.  
>   4-3. 이것처럼 우체국은 최선의 노력을 다해 목적지 주소로 편지를 보내지만 실제 사람에게 전달되었는지에 대해 보장하지 않음.

### 참고자료

> - [데이터의 순차전송](https://sw-test.tistory.com/17)
> - [TCP전체적인 큰특징](https://www.youtube.com/watch?v=ikDVGYp5dhg)
> - [흐름제어](https://aws-hyoh.tistory.com/entry/TCPIP-쉽게-이해하기)
> - [흐름제어2](https://velog.io/@qjatn1009/TCP와-UDP)
> - [흐름제어3](https://roka88.dev/114)
> - [신뢰성 보장이유](https://github.com/lunchScreen/Interview_Questions/issues/97)
> - [IP의 주요특징](https://velog.io/@kpl5672/ip-프로토콜의-이해)
> - [Best Effort](https://whatchang.tistory.com/32)
> - [비연결 서비스](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=jk130694&logNo=220731561157)

## 활용

- TCP/IP = 어떤 분야에서 사용하는가

> - 일반적인 기능에서 사용
>   - 메일
>   - 컴퓨터 간의 파일 전송
>   - 원격 로그인
> - 숨김
>   - tcp/ip는 전송 단위와 방법을 지정
>   - 네트워크 하드웨어의 세부 사항을 숨길 수 있다.
>   - 네트워크의 모든 머신이 네트워크 상의 다른 머신과 통신할 수 있도록
> - 인터넷 호스트 기능
>   - 네트워크에 연결된 여러 컴퓨터 사의 통신과 연결 허용
>   - 컴퓨터와 시스템을 네트워크에 접속
>   - 다른 인터넷 호스트와 통할 수 있는
>     <br></br>
>
> * 신뢰할 수 있는 TCP/IP
>   - 데이터를 주고 받는 두 사이에 주고 받음이 확실함
>   - 보낸 쪽에서는 내가 보낸 데이터를 상대방이 받았다는 응답을 보내야만 나머지를 보낼 수 있다.
>   - 이런 방법으로 데이터의 신뢰성을 높여준다.
>   - 데이터를 옮기는 과정에서 커다란 빅데이터를 여러 패킷으로 나누어 이동한다.
>     - 방대한 양의 데이터는 하나의 패킷으로만 주고 받기엔 무리가 있다.
>   - ip는 오로지 전송에만 집중하기에 여러 네트워크 통신망을 통해 패킷을 이동시키면 이동시키는 과정에서 패킷이 사라지거나 순서가 바뀔 수 있다.
>     - ip가 전송에 집중하느라 잃어버리거나 순서가 뒤바뀐 패킷을 되돌려 놓는다.
>     - 만약 패킷이 손실되었거나 잘못보내졌을때
>       - CHECKSUM 부분을 통해
>         송신자가 보낸 데이터가 제대로 보내졌는지 확인 할 수 있다.
>       - 잘못 보내졌을 경우 = reset(0) 값을 보낸다.
>       - 제대로 보내졌을 경우 = set(1)을 일렬번호에 +1 값을 넣어주면 된다
>     - 만약 패킷의 순서가 잘못되었을때
>       - 순서가 뒤바뀐 데이터도 문제가 되지 않는다.
>       - 할당되어 있는 번호가 있기에
>       - 수신자 측에서 이러한 순서대로 데이터를 정렬하여 붙여주기만 하면 된다.

### 참고자료

> - 참고자료
>   - [TCP 는 어떻게 신뢰성 있는 통신을 할까?](https://steemit.com/tcpipacknak/@znxkznxk1030/tcp)
>   - [TCP/IP(Transmission Control Protocol/Internet Protocol)](https://www.ibm.com/docs/ko/aix/7.1?topic=management-transmission-control-protocolinternet-protocol)
>   - [우아한 테그 10분 테크톡 tcp/ip](https://youtu.be/BEK354TRgZ8)
